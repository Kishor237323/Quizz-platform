<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-key="page.title">Language Selector Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .language-selector {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #333;
            color: white;
            padding: 10px;
            border-radius: 5px;
        }
        .language-selector select {
            background: #555;
            color: white;
            border: none;
            padding: 5px;
            border-radius: 3px;
        }
        .demo-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .translatable-text {
            background: #f0f8ff;
            padding: 10px;
            margin: 10px 0;
            border-left: 4px solid #007bff;
        }
        .code-example {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="language-selector">
        <label for="languageSelect">Language: </label>
        <select id="languageSelect">
            <option value="en">English</option>
            <option value="es">Español</option>
            <option value="fr">Français</option>
            <option value="de">Deutsch</option>
            <option value="zh">中文</option>
            <option value="ja">日本語</option>
            <option value="ko">한국어</option>
            <option value="ar">العربية</option>
            <option value="hi">हिन्दी</option>
            <option value="ru">Русский</option>
        </select>
    </div>

    <div class="container">
        <h1 data-key="demo.title">Language Selector Demo</h1>
        
        <div class="demo-section">
            <h2 data-key="demo.subtitle">How it works</h2>
            <p data-key="demo.description">
                This demo shows how the language selector works with data-key attributes. 
                When you change the language, all elements with data-key attributes will be updated automatically.
            </p>
        </div>

        <div class="demo-section">
            <h3 data-key="demo.examples">Examples</h3>
            
            <div class="translatable-text">
                <strong data-key="demo.welcome">Welcome to our website!</strong>
            </div>
            
            <div class="translatable-text">
                <span data-key="demo.clickHere">Click here</span> to learn more about our services.
            </div>
            
            <div class="translatable-text">
                <button data-key="demo.submitButton">Submit Form</button>
            </div>
        </div>

        <div class="demo-section">
            <h3 data-key="demo.codeExample">Code Example</h3>
            <div class="code-example">
&lt;!-- HTML with data-key attributes --&gt;
&lt;h1 data-key="demo.title"&gt;Language Selector Demo&lt;/h1&gt;
&lt;p data-key="demo.description"&gt;This is translatable text&lt;/p&gt;
&lt;button data-key="demo.submitButton"&gt;Submit&lt;/button&gt;

&lt;!-- JavaScript to change language --&gt;
updatePageLanguage('es'); // Changes to Spanish
            </div>
        </div>

        <div class="demo-section">
            <h3 data-key="demo.features">Features</h3>
            <ul>
                <li data-key="demo.feature1">Automatic language detection</li>
                <li data-key="demo.feature2">Parameter substitution (e.g., {name})</li>
                <li data-key="demo.feature3">Support for 25+ languages</li>
                <li data-key="demo.feature4">Local storage persistence</li>
                <li data-key="demo.feature5">Fallback to English</li>
            </ul>
        </div>

        <div class="demo-section">
            <h3 data-key="demo.parameters">Parameter Example</h3>
            <p>
                <span data-key="demo.helloUser" data-params='{"name": "John"}'></span>
            </p>
            <p>
                <span data-key="demo.itemsCount" data-params='{"count": 5}'></span>
            </p>
        </div>
    </div>

    <script>
        // Simplified translations for demo
        const translations = {
            en: {
                "page.title": "Language Selector Demo",
                "demo.title": "Language Selector Demo",
                "demo.subtitle": "How it works",
                "demo.description": "This demo shows how the language selector works with data-key attributes. When you change the language, all elements with data-key attributes will be updated automatically.",
                "demo.examples": "Examples",
                "demo.welcome": "Welcome to our website!",
                "demo.clickHere": "Click here",
                "demo.submitButton": "Submit Form",
                "demo.codeExample": "Code Example",
                "demo.features": "Features",
                "demo.feature1": "Automatic language detection",
                "demo.feature2": "Parameter substitution (e.g., {name})",
                "demo.feature3": "Support for 25+ languages",
                "demo.feature4": "Local storage persistence",
                "demo.feature5": "Fallback to English",
                "demo.parameters": "Parameter Example",
                "demo.helloUser": "Hello, {name}!",
                "demo.itemsCount": "You have {count} items in your cart."
            },
            es: {
                "page.title": "Demostración del Selector de Idioma",
                "demo.title": "Demostración del Selector de Idioma",
                "demo.subtitle": "Cómo funciona",
                "demo.description": "Esta demostración muestra cómo funciona el selector de idioma con atributos data-key. Cuando cambias el idioma, todos los elementos con atributos data-key se actualizarán automáticamente.",
                "demo.examples": "Ejemplos",
                "demo.welcome": "¡Bienvenido a nuestro sitio web!",
                "demo.clickHere": "Haz clic aquí",
                "demo.submitButton": "Enviar Formulario",
                "demo.codeExample": "Ejemplo de Código",
                "demo.features": "Características",
                "demo.feature1": "Detección automática de idioma",
                "demo.feature2": "Sustitución de parámetros (ej., {name})",
                "demo.feature3": "Soporte para más de 25 idiomas",
                "demo.feature4": "Persistencia en almacenamiento local",
                "demo.feature5": "Respaldo al inglés",
                "demo.parameters": "Ejemplo de Parámetros",
                "demo.helloUser": "¡Hola, {name}!",
                "demo.itemsCount": "Tienes {count} elementos en tu carrito."
            },
            fr: {
                "page.title": "Démonstration du Sélecteur de Langue",
                "demo.title": "Démonstration du Sélecteur de Langue",
                "demo.subtitle": "Comment ça marche",
                "demo.description": "Cette démonstration montre comment fonctionne le sélecteur de langue avec les attributs data-key. Lorsque vous changez de langue, tous les éléments avec des attributs data-key seront mis à jour automatiquement.",
                "demo.examples": "Exemples",
                "demo.welcome": "Bienvenue sur notre site web !",
                "demo.clickHere": "Cliquez ici",
                "demo.submitButton": "Soumettre le Formulaire",
                "demo.codeExample": "Exemple de Code",
                "demo.features": "Fonctionnalités",
                "demo.feature1": "Détection automatique de la langue",
                "demo.feature2": "Substitution de paramètres (ex., {name})",
                "demo.feature3": "Support pour plus de 25 langues",
                "demo.feature4": "Persistance du stockage local",
                "demo.feature5": "Retour à l'anglais",
                "demo.parameters": "Exemple de Paramètres",
                "demo.helloUser": "Bonjour, {name} !",
                "demo.itemsCount": "Vous avez {count} articles dans votre panier."
            }
        };

        // Function to update page language
        function updatePageLanguage(languageCode) {
            const translatableElements = document.querySelectorAll('[data-key]');
            
            translatableElements.forEach(element => {
                const key = element.getAttribute('data-key');
                const params = {};
                
                // Get parameters from data attributes
                const paramAttributes = element.getAttribute('data-params');
                if (paramAttributes) {
                    try {
                        Object.assign(params, JSON.parse(paramAttributes));
                    } catch (e) {
                        console.warn('Invalid data-params JSON:', paramAttributes);
                    }
                }
                
                // Get the translation
                const translation = getTranslation(languageCode, key, params);
                
                // Update the element content
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    if (element.hasAttribute('data-update-placeholder')) {
                        element.placeholder = translation;
                    } else {
                        element.value = translation;
                    }
                } else if (element.tagName === 'IMG') {
                    element.alt = translation;
                } else if (element.tagName === 'A') {
                    element.title = translation;
                } else {
                    element.textContent = translation;
                }
            });
            
            // Update document title
            document.title = getTranslation(languageCode, 'page.title');
            document.documentElement.lang = languageCode;
        }

        // Helper function to get translation with parameter substitution
        function getTranslation(language, key, params = {}) {
            const translation = translations[language]?.[key] || translations['en'][key] || key;
            
            // Replace parameters in the translation
            return translation.replace(/\{(\w+)\}/g, (match, param) => {
                return params[param] || match;
            });
        }

        // Initialize language selector
        document.getElementById('languageSelect').addEventListener('change', function() {
            const selectedLanguage = this.value;
            updatePageLanguage(selectedLanguage);
            localStorage.setItem('selectedLanguage', selectedLanguage);
        });

        // Set initial language
        const savedLanguage = localStorage.getItem('selectedLanguage') || 'en';
        document.getElementById('languageSelect').value = savedLanguage;
        updatePageLanguage(savedLanguage);
    </script>
</body>
</html> 